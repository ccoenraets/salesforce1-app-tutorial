<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>Salesforce App Tutorial</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/styles.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-721308-2', 'ccoenraets.github.io');
      ga('send', 'pageview');
    </script>
</head>

<body>

<div class="navbar navbar-default navbar-static-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">Salesforce1 App Tutorial</a>
        </div>
        <div class="navbar-collapse collapse">
            <!--<ul class="nav navbar-nav navbar-right">-->
                <!--<li><a-->
                        <!--href="https://github.com/ccoenraets/salesforce1-app-tutorial"><img-->
                        <!--src="images/icon-github.png" style="border: none;margin: -4px 0;height: 28px;width: 28px;"/>-->
                    <!--GitHub-->
                    <!--Project</a></li>-->
            <!--</ul>-->
        </div><!--/.nav-collapse -->
    </div>
</div>


<div class="container">

<div class="row">

    <div class="col-xs-12 col-sm-8">
        <h1>Module 10&#58; Working with Related Objects</h1>
        <!--<hr/>-->
        <p>Salesforce1 makes it easy to navigate through related objects. In this module, you create a new Expense Report 
object, and you define a Master-Detail Relationship between Expense Report and Expense. You then use the Salesforce1 
Mobile App to create expenses that belong to an expense report. You can then visualize expenses by expense report, and
 see the expense report total.</p>

<h2>Step 1: Create the Expense Report Object</h2>

<ol>
<li><p>In Setup, select <strong>Build</strong> &gt; <strong>Create</strong> &gt; <strong>Objects</strong></p></li>
<li><p>Click <strong>New Custom Object</strong>, and define the Expense Report object as follows (accept the default values for the 
properties that are not mentioned below):</p>

<ul>
<li>Label: <strong>Expense Report</strong></li>
<li>Plural Label: <strong>Expense Reports</strong></li>
<li>Starts with vowel sound: <strong>Checked</strong></li>
<li>Object Name: <strong>Expense_Report</strong></li>
<li>Record Name: <strong>Expense Report Name</strong></li>
<li>Data Type: <strong>Text</strong></li>
</ul>

<p><img src="images/expense_report_object.png" alt=""></p></li>
<li><p>Click <strong>Save</strong></p></li>
<li><p>In the <strong>Custom Fields &amp; Relationships</strong> section, click <strong>New</strong>, and create a <strong>Status</strong> field defined as follows:</p>

<ul>
<li>Data Type: <strong>Picklist</strong></li>
<li>Field Label: <strong>Status</strong></li>
<li>Values: <strong>Not Submitted</strong>, <strong>Submitted</strong>, <strong>Approved</strong>, <strong>Rejected</strong> (specify each value on its own row)</li>
<li>Use first value as default value: <strong>Checked</strong></li>
<li>Field Name: <strong>Status</strong></li>
</ul>

<p><img src="images/expense_report_status_field.png" alt=""></p></li>
<li><p>Click <strong>Next</strong>, <strong>Next</strong>, <strong>Save</strong></p></li>
</ol>

<h2>Step 2: Define the Master-Detail Relationship</h2>

<ol>
<li><p>In the Salesforce.com app in your browser, <strong>delete all the expenses</strong> to avoid constraint issues</p></li>
<li><p>In Setup, select <strong>Build</strong> &gt; <strong>Create</strong> &gt; <strong>Objects</strong> and click the <strong>Expense</strong> link</p></li>
<li><p>In the <strong>Custom Fields &amp; Relationships</strong> section, click <strong>New</strong>, and create an <strong>Expense Report</strong> field defined as 
follows:</p>

<ul>
<li>Data Type: <strong>Master-Detail Relationship</strong></li>
<li>Related To: <strong>Expense Report</strong></li>
<li>Field Label: <strong>Expense Report</strong></li>
<li>Field Name: <strong>Expense_Report</strong></li>
<li>Child Relationship Name: <strong>Expenses</strong></li>
</ul>

<p><img src="images/expense_report_field.png" alt=""></p></li>
<li><p>Click <strong>Next</strong>, <strong>Next</strong>, <strong>Next</strong>, and <strong>Save</strong></p></li>
</ol>

<h2>Step 3: Define a Roll-Up Summary Field</h2>

<p>To calculate and display the total of each expense report, add a Roll-Up Summary field to the Expense Report object:</p>

<ol>
<li><p>In Setup, select <strong>Build</strong> &gt; <strong>Create</strong> &gt; <strong>Objects</strong> and click the <strong>Expense Report</strong> link</p></li>
<li><p>In the <strong>Custom Fields &amp; Relationships</strong> section, click <strong>New</strong>, and create a <strong>Total</strong> field defined as 
follows:</p>

<ul>
<li>Data Type: <strong>Roll-Up Summary</strong></li>
<li>Field Label: <strong>Total</strong></li>
<li>Field Name: <strong>Total</strong></li>
<li>Summarized Object: <strong>Expenses</strong></li>
<li>Roll-Up Type: <strong>SUM</strong></li>
<li>Field to Aggregate: <strong>Amount</strong></li>
</ul>

<p><img src="images/total_field.png" alt=""> </p></li>
<li><p>Click <strong>Next</strong>, <strong>Next</strong>, <strong>Save</strong></p></li>
</ol>

<h2>Step 4: Creating a Tab</h2>

<p>In this step, you create a Tab to provide access to the <strong>Expense Report</strong> object both in the Salesforce.com app
 in your browser and in the Salesforce1 Mobile App.</p>

<ol>
<li><p>In <strong>Setup</strong> mode, select <strong>Build</strong> &gt; <strong>Create</strong> &gt; <strong>Tabs</strong></p></li>
<li><p>In the <strong>Custom Object Tabs</strong> section, click <strong>New</strong></p></li>
<li><p>Select <strong>Expense Report</strong> as the Object, click the magnifier icon next to Tab Style and select the <strong>Airplane</strong> 
icon</p></li>
<li><p>Click <strong>Next</strong>, <strong>Next</strong></p></li>
<li><p>Uncheck the <strong>Include Tab</strong> checkbox, check the <strong>Expenses</strong> checkbox, and click <strong>Save</strong></p></li>
</ol>

<h2>Step 5: Test the Application</h2>

<ol>
<li><p>Tap the menu icon <img src="images/hamburger.png" alt=""> (upper left corner)</p></li>
<li><p>In the menu, tap <strong>More...</strong> under <strong>Recent</strong></p></li>
<li><p>Tap <strong>Expense Reports</strong></p>

<blockquote>
<p>If <strong>Expense Reports</strong> doesn&#39;t appear under <strong>More...</strong>, pull (swipe down and release) the menu to refresh it</p>
</blockquote></li>
<li><p>Tap <strong>New</strong>, and enter a new expense report</p>

<p><img src="images/expense_report_new.png" alt=""></p></li>
<li><p>Click <strong>Save</strong> (upper right corner). The Expense Report details screen appears.</p>

<p><img src="images/expense_report_details.png" alt=""></p>

<blockquote>
<p>If you get a message indicating that &quot;The page you are trying to access is not available on mobile devices&quot;, 
close the Salesforce1 Mobile App and restart it. This will only happen once and it will only happen during development.</p>
</blockquote></li>
<li><p>Tap the menu icon <img src="images/hamburger.png" alt=""> (upper left corner)</p></li>
<li><p>In the menu, tap <strong>Expenses</strong> under <strong>Recent</strong></p></li>
<li><p>Tap <strong>New</strong> and add a couple of expenses for the expense report you just created</p></li>
<li><p>Go back to the expense report details view and notice that the Total field includes the new expenses</p>

<blockquote>
<p>If the total has not been updated pull (swipe down and release) the view to refresh it.</p>
</blockquote></li>
<li><p>Swipe left and notice that the <strong>Expenses</strong> related list automatically appears </p>

<p><img src="images/expense_report_swipe_left.png" alt="">
<img src="images/related_lists.png" alt=""></p></li>
<li><p>Tap the <strong>Expenses</strong> related list to display the list of expenses for that expense report</p>

<p><img src="images/expenses_related_list.png" alt=""></p>

<blockquote>
<p>If the list is empty, pull it (swipe down and release) to refresh it.</p>
</blockquote></li>
<li><p>Tap an expense to see the details</p></li>
</ol>

<h2>Step 6: Pin Expense Reports at the Top of the List</h2>

<p>For faster access, you can pin frequently used items at the top of the <strong>Recent</strong> menu item: you will no longer need 
to go find an object deep under the <strong>More...</strong> item.  </p>

<p><img src="images/pin_expense_reports.png" alt=""></p>

<ol>
<li><p>In the full Salesforce.com app, click the Search button in the header</p>

<blockquote>
<p>You don&#39;t need to type anything in the search box: we just need the Search Results by Records to appear in the 
left navigation.  </p>
</blockquote></li>
<li><p>In the <strong>Search Results</strong> (left navigation), mouse over <strong>Expense Reports</strong>, and click the Pin button</p></li>
<li><p>In the Salesforce1 Mobile App, tap the menu icon <img src="images/hamburger.png" alt=""> (upper left corner)</p></li>
<li><p>If <strong>Expense Reports</strong> doesn&#39;t appear as the first item under <strong>Recent</strong>, pull (swipe down and release) the menu to 
refresh it</p>

<p><img src="images/s1_pin_expense_reports.png" alt=""></p></li>
</ol>

<h2>Step 7: Modify the New Expense Global Action Layout</h2>

<p>In a Master-Detail Relationship, every child record must have a parent. However, the <strong>New Expense</strong> Global Action 
Layout you created in <a href="create-global-action.html">Module 9</a> does not include the <strong>Expense Report</strong> field to let the user specify 
the parent. To add the <strong>Expense Report</strong> field to the New Expense Global Action layout:</p>

<ol>
<li><p>In <strong>Setup</strong> mode, select <strong>Build</strong> &gt; <strong>Create</strong> &gt; <strong>Global Actions</strong> &gt; <strong>Actions</strong></p></li>
<li><p>Click <strong>Layout</strong> to the left of <strong>New Expense</strong></p></li>
<li><p>Drag the <strong>Expense Report</strong> field to the top of the layout and click <strong>Save</strong> </p>

<p><img src="images/new_expense_action_layout.png" alt=""></p></li>
</ol>

<h2>Extra Credits</h2>

<ol>
<li><p>Using the instructions in <a href="create-mobile-layout.html">Module 6</a> as a reference, 
create a Mobile Layout for the Expense Report object that 
only 
displays the information that mobile users really need</p></li>
<li><p>Using the instructions in <a href="create-compact-layout.html">Module 7</a> as a reference, 
create a Compact Layout for the Expense Report object so that 
the 
record highlight area looks like this:</p>

<p><img src="images/expense_report_compact.png" alt=""></p></li>
</ol>

<div class="row" style="margin-top:40px;">
<div class="col-sm-12">
<a href="create-global-action.html" class="btn btn-default"><i class="glyphicon glyphicon-chevron-left"></i> Previous</a>
<a href="object-action-create-record.html" class="btn btn-default pull-right">Next <i class="glyphicon glyphicon-chevron-right"></i></a>
</div>

<p></div></p>



        <div class="row" style="margin-top: 30px;">
            <div class="col-xs-12">
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'salesforcedeveloperworkshop'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </div>


    </div>

    <div class="col-xs-12 col-sm-4 right-nav">

        <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading" style="font-variant:small-caps;font-size: 18px;">modules</div>
            <ol class="list-group">
                <li><a href="developer-edition.html">Creating a Developer Edition Account</a></li>
                <li><a href="install-salesforce1-app.html">Installing the Salesforce1 App</a></li>
                <li><a href="create-expense-object.html">Creating the Expense Object</a></li>
                <li><a href="create-expenses-tab.html">Creating the Expenses Tab</a></li>
                <li><a href="enter-expenses-in-s1.html">Entering Expenses in the S1 Mobile App</a></li>
                <li><a href="create-mobile-layout.html">Creating a Mobile Layout</a></li>
                <li><a href="create-compact-layout.html">Creating a Compact Layout</a></li>
                <li><a href="chatter-feed.html">Uploading Receipts using the Chatter Feed</a></li>
                <li><a href="create-global-action.html">Creating a Global Action</a></li>
                <li><a href="related-objects.html">Working with Related Objects</a></li>
                <li><a href="object-action-create-record.html">Creating a Child Record with an Object Action</a></li>
                <li><a href="object-action-update-record.html">Updating a Record with an Object Action</a></li>
                <li><a href="mobile-card.html">Working with Mobile Cards</a></li>
                <li><a href="next.html">Next Steps</a></li>
            </ol>
        </div>
        <a href="https://twitter.com/share" class="twitter-share-button" data-size="large" data-url="http://ccoenraets.github.io/salesforce1-app-tutorial" data-text="New #Salesforce1 Mobile App Tutorial: Build an expense report app with no code #S1AppTutorial">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    </div>

</div>

</div>

<div class="container">
    <div id="footer">
        <p class="text-muted">Salesforce Developer Workshop, 2014.</p>
    </div>    <!-- Site footer -->
</div>


<script src="lib/jquery.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
</body>
</html>